function trace(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var i="",n=t.length,r=0;n>r;r++)i+=" "+t[r];console.log(i)}function log(t,e){trace(t+": ",e)}var xd;!function(t){var e=function(t){function e(e,i){t.call(this),this.msgs=[],this.maxW=e,this.maxH=i,this.touchEnabled=!0,this.drawBG(e,i),this.initTF()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.drawBG=function(t,e){this.graphics.beginFill(6710886,.8),this.graphics.drawRect(0,0,t,e+5),this.graphics.endFill()},n.initTF=function(){this.tf=new egret.TextField,this.tf.textAlign="left",this.tf.lineSpacing=5,this.tf.touchEnabled=!0,this.tf.height=this.maxH,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchStartTF,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMoveTF,this),this.addChild(this.tf)},n.onTouchStartTF=function(t){this.org_Ypos=t.stageY},n.onTouchMoveTF=function(t){var e=t.stageY-this.org_Ypos;if(0>e){var i=Math.abs(e),n=parseInt((i/this.LineHeightGap).toString())+this.tf.scrollV;n>this.MaxScrollV?this.tf.scrollV=this.MaxScrollV:this.tf.scrollV=n}else{var i=Math.abs(e),n=this.tf.scrollV-parseInt((i/this.LineHeightGap).toString());1>n?this.tf.scrollV=1:this.tf.scrollV=n}},n.addLog=function(t,e){void 0===e&&(e="系统"),this.msgs.length>50&&this.msgs.shift(),this.msgs.push(t),this.tf.text="";for(var i=0,n=this.msgs.length;n>i;i++)this.tf.appendText("["+e+"]: "+this.msgs[i]+"\n");this.LineHeightGap=this.tf.textHeight/this.tf.maxScrollV,this.tf.scrollV=parseInt(((this.tf.textHeight-this.maxH)/this.LineHeightGap).toString()),this.MaxScrollV=this.tf.scrollV},e}(egret.Sprite);t.LogView=e,egret.registerClass(e,"xd.LogView")}(xd||(xd={}));var xd;!function(t){var e=function(){function t(){this.observers=[]}var e=(__define,t),i=e.prototype;return i.attach=function(t){-1==this.observers.indexOf(t)&&this.observers.push(t)},i.detach=function(t){var e=this.observers.indexOf(t);e>-1&&this.observers.splice(e,1)},i.notifiy=function(t){this.observers&&this.observers.length>0&&this.observers.forEach(function(e,i,n){e.update(t)})},t}();t.Stock=e,egret.registerClass(e,"xd.Stock",["xd.INotifier"])}(xd||(xd={}));var xd;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.getColorValue=function(t,e,i){var n=0;return n=t<<16|e<<8|i},t}();t.ColorUtils=e,egret.registerClass(e,"xd.ColorUtils")}(xd||(xd={}));var xd;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.getBmp=function(t){var e=new egret.Bitmap;return e.texture=RES.getRes(t),e},t.getGroup=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=null),void 0===i&&(i=5),void 0===n&&(n=null);var r=new eui.Group,o=null;if(1==t?(o=new eui.HorizontalLayout,o.gap=i,e&&(o.verticalAlign=e)):2==t&&(o=new eui.VerticalLayout,o.gap=i,e&&(o.horizontalAlign=e)),r.layout=o,n)for(var s=0,a=n.length;a>s;s++)r.addChild(n[s]);return r},t.centerRotate=function(t,e){var i=t.rotation;t.rotation=0;var n=t.width,r=t.height;t.rotation=i;var o=t.localToGlobal(n/2,r/2);t.rotation=e;var s=t.localToGlobal(n/2,r/2),a=o.subtract(s),h=t.matrix;h.translate(a.x,a.y),t.matrix=h},t.scaleAtPoint=function(t,e,i){var n=new egret.Point(t.x,t.y),r=t.localToGlobal(e.x,e.y);t.scaleX=t.scaleY=i;var o=t.localToGlobal(e.x,e.y);t.x-=o.x-r.x,t.y-=o.y-r.y;var s=t.rotation,a=new egret.Point(t.x,t.y);90==s?t.x-=a.x-n.x:180==s?(t.x-=a.x-n.x,t.y-=a.y-n.y):-90==s&&(t.y-=a.y-n.y)},t}();t.CommonUtils=e,egret.registerClass(e,"xd.CommonUtils")}(xd||(xd={}));var xd;!function(t){var e=egret.EventDispatcher,i=function(){function i(){}var n=(__define,i);n.prototype;return i.addEventListener=function(t,e,n,r,o){i.dispatcher.addEventListener(t,e,n,r,o)},i.once=function(t,e,n,r,o){i.dispatcher.once(t,e,n,r,o)},i.removeEventListener=function(t,e,n,r){i.dispatcher.removeEventListener(t,e,n,r)},i.hasEventListener=function(t){return i.hasEventListener(t)},i.dispatchEvent=function(e,n){return void 0===n&&(n=null),i.dispatcher.dispatchEvent(new t.GameEvent(e,n))},i.willTrigger=function(t){return i.dispatcher.willTrigger(t)},i.dispatcher=new e,i}();t.GameDispatcher=i,egret.registerClass(i,"xd.GameDispatcher")}(xd||(xd={}));var xd;!function(t){var e=function(t){function e(e,i,n,r){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===r&&(r=!1),t.call(this,e,n,r),i&&(this._obj=i)}__extends(e,t);var i=__define,n=e,r=n.prototype;return r.clone=function(t){return new e(this.type,t?t:this._obj,this.bubbles,this.cancelable)},r.toString=function(){console.log("GameEvent: ","type","bubbles","cancelable")},i(r,"param",function(){return this._obj}),e}(egret.Event);t.GameEvent=e,egret.registerClass(e,"xd.GameEvent")}(xd||(xd={}));